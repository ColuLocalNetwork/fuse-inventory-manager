version: '3'
services:

  mongo:
    image: "mongo"
    container_name: mongodb
    ports:
      - '27017:27017'
    volumes:
      - 'mongo:/var/lib/mongo/data'

  inventory-manager:
    build: .
    image: inventory-manager
    container_name: inventory-manager-development
    ports:
     - "7545:7545"
     - "8081:8081"
    volumes:
     - inventory-manager:/inventory-manager
    tty: true
    privileged: true
    links:
     - mongo:mongodb
    depends_on:
      - mongo
    command:
      - /bin/sh
      - -c
      - |
          /entrypoint.sh

volumes:
  mongo:
  inventory-manager:
    driver_opts:
      type: none
      device: $PWD/../../
      o: bind
